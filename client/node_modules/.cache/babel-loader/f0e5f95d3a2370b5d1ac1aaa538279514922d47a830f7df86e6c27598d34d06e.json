{"ast":null,"code":"import clsx from 'clsx';\nimport debounce from 'lodash.debounce';\nimport React, { useEffect, useMemo, useRef } from 'react';\nimport { DEFAULT_LOAD_PAGE_SCROLL_THRESHOLD } from '../../constants/limits';\n/**\n * Prevents Chrome hangups\n * See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n */\nconst mousewheelListener = event => {\n  if (event instanceof WheelEvent && event.deltaY === 1) {\n    event.preventDefault();\n  }\n};\nexport const InfiniteScrollPaginator = props => {\n  const {\n    children,\n    listenToScroll,\n    loadNextOnScrollToBottom,\n    loadNextOnScrollToTop,\n    threshold = DEFAULT_LOAD_PAGE_SCROLL_THRESHOLD,\n    useCapture = false,\n    className,\n    ...componentProps\n  } = props;\n  const rootRef = useRef(null);\n  const childRef = useRef(null);\n  const scrollListener = useMemo(() => debounce(() => {\n    const root = rootRef.current;\n    const child = childRef.current;\n    if (!root || root.offsetParent === null || !child) {\n      return;\n    }\n    const distanceFromBottom = child.scrollHeight - root.scrollTop - root.clientHeight;\n    const distanceFromTop = root.scrollTop;\n    if (listenToScroll) {\n      listenToScroll(distanceFromBottom, distanceFromTop, threshold);\n    }\n    if (distanceFromTop < Number(threshold)) {\n      loadNextOnScrollToTop?.();\n    }\n    if (distanceFromBottom < Number(threshold)) {\n      loadNextOnScrollToBottom?.();\n    }\n  }, 500), [listenToScroll, loadNextOnScrollToBottom, loadNextOnScrollToTop, threshold]);\n  useEffect(() => {\n    const scrollElement = rootRef.current;\n    if (!scrollElement) return;\n    scrollElement.addEventListener('scroll', scrollListener, useCapture);\n    return () => {\n      scrollElement.removeEventListener('scroll', scrollListener, useCapture);\n    };\n  }, [scrollListener, useCapture]);\n  useEffect(() => {\n    const root = rootRef.current;\n    if (!root || typeof ResizeObserver === 'undefined' || !scrollListener) return;\n    const observer = new ResizeObserver(scrollListener);\n    observer.observe(root);\n    return () => {\n      observer.disconnect();\n    };\n  }, [scrollListener]);\n  useEffect(() => {\n    const root = rootRef.current;\n    if (root) {\n      root.addEventListener('wheel', mousewheelListener, {\n        passive: false\n      });\n    }\n    return () => {\n      if (root) {\n        root.removeEventListener('wheel', mousewheelListener, useCapture);\n      }\n    };\n  }, [useCapture]);\n  return React.createElement(\"div\", {\n    ...componentProps,\n    className: clsx('str-chat__infinite-scroll-paginator', className),\n    ref: rootRef\n  }, React.createElement(\"div\", {\n    className: 'str-chat__infinite-scroll-paginator__content',\n    ref: childRef\n  }, children));\n};","map":{"version":3,"names":["clsx","debounce","React","useEffect","useMemo","useRef","DEFAULT_LOAD_PAGE_SCROLL_THRESHOLD","mousewheelListener","event","WheelEvent","deltaY","preventDefault","InfiniteScrollPaginator","props","children","listenToScroll","loadNextOnScrollToBottom","loadNextOnScrollToTop","threshold","useCapture","className","componentProps","rootRef","childRef","scrollListener","root","current","child","offsetParent","distanceFromBottom","scrollHeight","scrollTop","clientHeight","distanceFromTop","Number","scrollElement","addEventListener","removeEventListener","ResizeObserver","observer","observe","disconnect","passive","createElement","ref"],"sources":["C:/Users/abdel/OneDrive/Desktop/Medical-plager/client/node_modules/stream-chat-react/dist/components/InfiniteScrollPaginator/InfiniteScrollPaginator.js"],"sourcesContent":["import clsx from 'clsx';\nimport debounce from 'lodash.debounce';\nimport React, { useEffect, useMemo, useRef } from 'react';\nimport { DEFAULT_LOAD_PAGE_SCROLL_THRESHOLD } from '../../constants/limits';\n/**\n * Prevents Chrome hangups\n * See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n */\nconst mousewheelListener = (event) => {\n    if (event instanceof WheelEvent && event.deltaY === 1) {\n        event.preventDefault();\n    }\n};\nexport const InfiniteScrollPaginator = (props) => {\n    const { children, listenToScroll, loadNextOnScrollToBottom, loadNextOnScrollToTop, threshold = DEFAULT_LOAD_PAGE_SCROLL_THRESHOLD, useCapture = false, className, ...componentProps } = props;\n    const rootRef = useRef(null);\n    const childRef = useRef(null);\n    const scrollListener = useMemo(() => debounce(() => {\n        const root = rootRef.current;\n        const child = childRef.current;\n        if (!root || root.offsetParent === null || !child) {\n            return;\n        }\n        const distanceFromBottom = child.scrollHeight - root.scrollTop - root.clientHeight;\n        const distanceFromTop = root.scrollTop;\n        if (listenToScroll) {\n            listenToScroll(distanceFromBottom, distanceFromTop, threshold);\n        }\n        if (distanceFromTop < Number(threshold)) {\n            loadNextOnScrollToTop?.();\n        }\n        if (distanceFromBottom < Number(threshold)) {\n            loadNextOnScrollToBottom?.();\n        }\n    }, 500), [listenToScroll, loadNextOnScrollToBottom, loadNextOnScrollToTop, threshold]);\n    useEffect(() => {\n        const scrollElement = rootRef.current;\n        if (!scrollElement)\n            return;\n        scrollElement.addEventListener('scroll', scrollListener, useCapture);\n        return () => {\n            scrollElement.removeEventListener('scroll', scrollListener, useCapture);\n        };\n    }, [scrollListener, useCapture]);\n    useEffect(() => {\n        const root = rootRef.current;\n        if (!root || typeof ResizeObserver === 'undefined' || !scrollListener)\n            return;\n        const observer = new ResizeObserver(scrollListener);\n        observer.observe(root);\n        return () => {\n            observer.disconnect();\n        };\n    }, [scrollListener]);\n    useEffect(() => {\n        const root = rootRef.current;\n        if (root) {\n            root.addEventListener('wheel', mousewheelListener, { passive: false });\n        }\n        return () => {\n            if (root) {\n                root.removeEventListener('wheel', mousewheelListener, useCapture);\n            }\n        };\n    }, [useCapture]);\n    return (React.createElement(\"div\", { ...componentProps, className: clsx('str-chat__infinite-scroll-paginator', className), ref: rootRef },\n        React.createElement(\"div\", { className: 'str-chat__infinite-scroll-paginator__content', ref: childRef }, children)));\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}