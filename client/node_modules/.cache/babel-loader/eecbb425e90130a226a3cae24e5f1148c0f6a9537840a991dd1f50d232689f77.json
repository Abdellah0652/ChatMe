{"ast":null,"code":"import React from 'react';\nimport { VALID_MAX_VOTES_VALUE_REGEX } from '../constants';\nimport { useChatContext, useMessageInputContext, useTranslationContext } from '../../../context';\nexport const PollCreationDialogControls = ({\n  close,\n  errors,\n  state\n}) => {\n  const {\n    client\n  } = useChatContext();\n  const {\n    t\n  } = useTranslationContext('PollCreationDialogControls');\n  const {\n    handleSubmit: handleSubmitMessage\n  } = useMessageInputContext('PollCreationDialogControls');\n  const canSubmit = () => {\n    const hasAtLeastOneOption = state.options.filter(o => !!o.text).length > 0;\n    const hasName = !!state.name;\n    const maxVotesAllowedNumber = parseInt(state.max_votes_allowed?.match(VALID_MAX_VOTES_VALUE_REGEX)?.[0] || '');\n    const validMaxVotesAllowed = state.max_votes_allowed === '' || !!maxVotesAllowedNumber && (2 <= maxVotesAllowedNumber || maxVotesAllowedNumber <= 10);\n    const noErrors = errors.length === 0;\n    return hasAtLeastOneOption && hasName && validMaxVotesAllowed && noErrors;\n  };\n  return React.createElement(\"div\", {\n    className: 'str-chat__dialog__controls'\n  }, React.createElement(\"button\", {\n    className: 'str-chat__dialog__controls-button str-chat__dialog__controls-button--cancel',\n    onClick: close\n  }, t('Cancel')), React.createElement(\"button\", {\n    className: 'str-chat__dialog__controls-button str-chat__dialog__controls-button--submit',\n    disabled: !canSubmit(),\n    onClick: async e => {\n      let pollId;\n      try {\n        const {\n          poll\n        } = await client.createPoll({\n          ...state,\n          max_votes_allowed: state.max_votes_allowed ? parseInt(state.max_votes_allowed) : undefined,\n          options: state.options?.filter(o => o.text).map(o => ({\n            text: o.text\n          }))\n        });\n        pollId = poll.id;\n      } catch (e) {\n        // todo: add notification\n        return;\n      }\n      try {\n        await handleSubmitMessage(e, {\n          poll_id: pollId\n        });\n      } catch (e) {\n        // todo: add notification\n        return;\n      }\n      close();\n    },\n    type: 'submit'\n  }, t('Create')));\n};","map":{"version":3,"names":["React","VALID_MAX_VOTES_VALUE_REGEX","useChatContext","useMessageInputContext","useTranslationContext","PollCreationDialogControls","close","errors","state","client","t","handleSubmit","handleSubmitMessage","canSubmit","hasAtLeastOneOption","options","filter","o","text","length","hasName","name","maxVotesAllowedNumber","parseInt","max_votes_allowed","match","validMaxVotesAllowed","noErrors","createElement","className","onClick","disabled","e","pollId","poll","createPoll","undefined","map","id","poll_id","type"],"sources":["C:/Users/abdel/OneDrive/Desktop/Medical-plager/client/node_modules/stream-chat-react/dist/components/Poll/PollCreationDialog/PollCreationDialogControls.js"],"sourcesContent":["import React from 'react';\nimport { VALID_MAX_VOTES_VALUE_REGEX } from '../constants';\nimport { useChatContext, useMessageInputContext, useTranslationContext } from '../../../context';\nexport const PollCreationDialogControls = ({ close, errors, state, }) => {\n    const { client } = useChatContext();\n    const { t } = useTranslationContext('PollCreationDialogControls');\n    const { handleSubmit: handleSubmitMessage } = useMessageInputContext('PollCreationDialogControls');\n    const canSubmit = () => {\n        const hasAtLeastOneOption = state.options.filter((o) => !!o.text).length > 0;\n        const hasName = !!state.name;\n        const maxVotesAllowedNumber = parseInt(state.max_votes_allowed?.match(VALID_MAX_VOTES_VALUE_REGEX)?.[0] || '');\n        const validMaxVotesAllowed = state.max_votes_allowed === '' ||\n            (!!maxVotesAllowedNumber && (2 <= maxVotesAllowedNumber || maxVotesAllowedNumber <= 10));\n        const noErrors = errors.length === 0;\n        return hasAtLeastOneOption && hasName && validMaxVotesAllowed && noErrors;\n    };\n    return (React.createElement(\"div\", { className: 'str-chat__dialog__controls' },\n        React.createElement(\"button\", { className: 'str-chat__dialog__controls-button str-chat__dialog__controls-button--cancel', onClick: close }, t('Cancel')),\n        React.createElement(\"button\", { className: 'str-chat__dialog__controls-button str-chat__dialog__controls-button--submit', disabled: !canSubmit(), onClick: async (e) => {\n                let pollId;\n                try {\n                    const { poll } = await client.createPoll({\n                        ...state,\n                        max_votes_allowed: state.max_votes_allowed\n                            ? parseInt(state.max_votes_allowed)\n                            : undefined,\n                        options: state.options?.filter((o) => o.text).map((o) => ({ text: o.text })),\n                    });\n                    pollId = poll.id;\n                }\n                catch (e) {\n                    // todo: add notification\n                    return;\n                }\n                try {\n                    await handleSubmitMessage(e, { poll_id: pollId });\n                }\n                catch (e) {\n                    // todo: add notification\n                    return;\n                }\n                close();\n            }, type: 'submit' }, t('Create'))));\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,2BAA2B,QAAQ,cAAc;AAC1D,SAASC,cAAc,EAAEC,sBAAsB,EAAEC,qBAAqB,QAAQ,kBAAkB;AAChG,OAAO,MAAMC,0BAA0B,GAAGA,CAAC;EAAEC,KAAK;EAAEC,MAAM;EAAEC;AAAO,CAAC,KAAK;EACrE,MAAM;IAAEC;EAAO,CAAC,GAAGP,cAAc,CAAC,CAAC;EACnC,MAAM;IAAEQ;EAAE,CAAC,GAAGN,qBAAqB,CAAC,4BAA4B,CAAC;EACjE,MAAM;IAAEO,YAAY,EAAEC;EAAoB,CAAC,GAAGT,sBAAsB,CAAC,4BAA4B,CAAC;EAClG,MAAMU,SAAS,GAAGA,CAAA,KAAM;IACpB,MAAMC,mBAAmB,GAAGN,KAAK,CAACO,OAAO,CAACC,MAAM,CAAEC,CAAC,IAAK,CAAC,CAACA,CAAC,CAACC,IAAI,CAAC,CAACC,MAAM,GAAG,CAAC;IAC5E,MAAMC,OAAO,GAAG,CAAC,CAACZ,KAAK,CAACa,IAAI;IAC5B,MAAMC,qBAAqB,GAAGC,QAAQ,CAACf,KAAK,CAACgB,iBAAiB,EAAEC,KAAK,CAACxB,2BAA2B,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;IAC9G,MAAMyB,oBAAoB,GAAGlB,KAAK,CAACgB,iBAAiB,KAAK,EAAE,IACtD,CAAC,CAACF,qBAAqB,KAAK,CAAC,IAAIA,qBAAqB,IAAIA,qBAAqB,IAAI,EAAE,CAAE;IAC5F,MAAMK,QAAQ,GAAGpB,MAAM,CAACY,MAAM,KAAK,CAAC;IACpC,OAAOL,mBAAmB,IAAIM,OAAO,IAAIM,oBAAoB,IAAIC,QAAQ;EAC7E,CAAC;EACD,OAAQ3B,KAAK,CAAC4B,aAAa,CAAC,KAAK,EAAE;IAAEC,SAAS,EAAE;EAA6B,CAAC,EAC1E7B,KAAK,CAAC4B,aAAa,CAAC,QAAQ,EAAE;IAAEC,SAAS,EAAE,6EAA6E;IAAEC,OAAO,EAAExB;EAAM,CAAC,EAAEI,CAAC,CAAC,QAAQ,CAAC,CAAC,EACxJV,KAAK,CAAC4B,aAAa,CAAC,QAAQ,EAAE;IAAEC,SAAS,EAAE,6EAA6E;IAAEE,QAAQ,EAAE,CAAClB,SAAS,CAAC,CAAC;IAAEiB,OAAO,EAAE,MAAOE,CAAC,IAAK;MAChK,IAAIC,MAAM;MACV,IAAI;QACA,MAAM;UAAEC;QAAK,CAAC,GAAG,MAAMzB,MAAM,CAAC0B,UAAU,CAAC;UACrC,GAAG3B,KAAK;UACRgB,iBAAiB,EAAEhB,KAAK,CAACgB,iBAAiB,GACpCD,QAAQ,CAACf,KAAK,CAACgB,iBAAiB,CAAC,GACjCY,SAAS;UACfrB,OAAO,EAAEP,KAAK,CAACO,OAAO,EAAEC,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,CAAC,CAACmB,GAAG,CAAEpB,CAAC,KAAM;YAAEC,IAAI,EAAED,CAAC,CAACC;UAAK,CAAC,CAAC;QAC/E,CAAC,CAAC;QACFe,MAAM,GAAGC,IAAI,CAACI,EAAE;MACpB,CAAC,CACD,OAAON,CAAC,EAAE;QACN;QACA;MACJ;MACA,IAAI;QACA,MAAMpB,mBAAmB,CAACoB,CAAC,EAAE;UAAEO,OAAO,EAAEN;QAAO,CAAC,CAAC;MACrD,CAAC,CACD,OAAOD,CAAC,EAAE;QACN;QACA;MACJ;MACA1B,KAAK,CAAC,CAAC;IACX,CAAC;IAAEkC,IAAI,EAAE;EAAS,CAAC,EAAE9B,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;AAC9C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}