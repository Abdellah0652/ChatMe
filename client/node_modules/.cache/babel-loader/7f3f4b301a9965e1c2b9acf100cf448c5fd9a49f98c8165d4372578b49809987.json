{"ast":null,"code":"import { useCallback, useLayoutEffect, useRef, useState } from 'react';\nimport { useMessageListScrollManager } from './useMessageListScrollManager';\nexport const useScrollLocationLogic = params => {\n  const {\n    loadMoreScrollThreshold,\n    messages = [],\n    scrolledUpThreshold = 200,\n    hasMoreNewer,\n    suppressAutoscroll,\n    listElement\n  } = params;\n  const [hasNewMessages, setHasNewMessages] = useState(false);\n  const [wrapperRect, setWrapperRect] = useState();\n  const [isMessageListScrolledToBottom, setIsMessageListScrolledToBottom] = useState(true);\n  const closeToBottom = useRef(false);\n  const closeToTop = useRef(false);\n  const scrollToBottom = useCallback(() => {\n    if (!listElement?.scrollTo || hasMoreNewer || suppressAutoscroll) {\n      return;\n    }\n    listElement.scrollTo({\n      top: listElement.scrollHeight\n    });\n    setHasNewMessages(false);\n  }, [listElement, hasMoreNewer, suppressAutoscroll]);\n  useLayoutEffect(() => {\n    if (listElement) {\n      setWrapperRect(listElement.getBoundingClientRect());\n      scrollToBottom();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [listElement, hasMoreNewer]);\n  const updateScrollTop = useMessageListScrollManager({\n    loadMoreScrollThreshold,\n    messages,\n    onScrollBy: scrollBy => {\n      listElement?.scrollBy({\n        top: scrollBy\n      });\n    },\n    scrollContainerMeasures: () => ({\n      offsetHeight: listElement?.offsetHeight || 0,\n      scrollHeight: listElement?.scrollHeight || 0\n    }),\n    scrolledUpThreshold,\n    scrollToBottom,\n    showNewMessages: () => setHasNewMessages(true)\n  });\n  const onScroll = useCallback(event => {\n    const element = event.target;\n    const scrollTop = element.scrollTop;\n    updateScrollTop(scrollTop);\n    const offsetHeight = element.offsetHeight;\n    const scrollHeight = element.scrollHeight;\n    const prevCloseToBottom = closeToBottom.current;\n    closeToBottom.current = scrollHeight - (scrollTop + offsetHeight) < scrolledUpThreshold;\n    closeToTop.current = scrollTop < scrolledUpThreshold;\n    if (closeToBottom.current) {\n      setHasNewMessages(false);\n    }\n    if (prevCloseToBottom && !closeToBottom.current) {\n      setIsMessageListScrolledToBottom(false);\n    } else if (!prevCloseToBottom && closeToBottom.current) {\n      setIsMessageListScrolledToBottom(true);\n    }\n  }, [updateScrollTop, closeToTop, closeToBottom, scrolledUpThreshold]);\n  return {\n    hasNewMessages,\n    isMessageListScrolledToBottom,\n    onScroll,\n    scrollToBottom,\n    wrapperRect\n  };\n};","map":{"version":3,"names":["useCallback","useLayoutEffect","useRef","useState","useMessageListScrollManager","useScrollLocationLogic","params","loadMoreScrollThreshold","messages","scrolledUpThreshold","hasMoreNewer","suppressAutoscroll","listElement","hasNewMessages","setHasNewMessages","wrapperRect","setWrapperRect","isMessageListScrolledToBottom","setIsMessageListScrolledToBottom","closeToBottom","closeToTop","scrollToBottom","scrollTo","top","scrollHeight","getBoundingClientRect","updateScrollTop","onScrollBy","scrollBy","scrollContainerMeasures","offsetHeight","showNewMessages","onScroll","event","element","target","scrollTop","prevCloseToBottom","current"],"sources":["C:/Users/abdel/OneDrive/Desktop/Medical-plager/client/node_modules/stream-chat-react/dist/components/MessageList/hooks/MessageList/useScrollLocationLogic.js"],"sourcesContent":["import { useCallback, useLayoutEffect, useRef, useState } from 'react';\nimport { useMessageListScrollManager } from './useMessageListScrollManager';\nexport const useScrollLocationLogic = (params) => {\n    const { loadMoreScrollThreshold, messages = [], scrolledUpThreshold = 200, hasMoreNewer, suppressAutoscroll, listElement, } = params;\n    const [hasNewMessages, setHasNewMessages] = useState(false);\n    const [wrapperRect, setWrapperRect] = useState();\n    const [isMessageListScrolledToBottom, setIsMessageListScrolledToBottom] = useState(true);\n    const closeToBottom = useRef(false);\n    const closeToTop = useRef(false);\n    const scrollToBottom = useCallback(() => {\n        if (!listElement?.scrollTo || hasMoreNewer || suppressAutoscroll) {\n            return;\n        }\n        listElement.scrollTo({\n            top: listElement.scrollHeight,\n        });\n        setHasNewMessages(false);\n    }, [listElement, hasMoreNewer, suppressAutoscroll]);\n    useLayoutEffect(() => {\n        if (listElement) {\n            setWrapperRect(listElement.getBoundingClientRect());\n            scrollToBottom();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [listElement, hasMoreNewer]);\n    const updateScrollTop = useMessageListScrollManager({\n        loadMoreScrollThreshold,\n        messages,\n        onScrollBy: (scrollBy) => {\n            listElement?.scrollBy({ top: scrollBy });\n        },\n        scrollContainerMeasures: () => ({\n            offsetHeight: listElement?.offsetHeight || 0,\n            scrollHeight: listElement?.scrollHeight || 0,\n        }),\n        scrolledUpThreshold,\n        scrollToBottom,\n        showNewMessages: () => setHasNewMessages(true),\n    });\n    const onScroll = useCallback((event) => {\n        const element = event.target;\n        const scrollTop = element.scrollTop;\n        updateScrollTop(scrollTop);\n        const offsetHeight = element.offsetHeight;\n        const scrollHeight = element.scrollHeight;\n        const prevCloseToBottom = closeToBottom.current;\n        closeToBottom.current = scrollHeight - (scrollTop + offsetHeight) < scrolledUpThreshold;\n        closeToTop.current = scrollTop < scrolledUpThreshold;\n        if (closeToBottom.current) {\n            setHasNewMessages(false);\n        }\n        if (prevCloseToBottom && !closeToBottom.current) {\n            setIsMessageListScrolledToBottom(false);\n        }\n        else if (!prevCloseToBottom && closeToBottom.current) {\n            setIsMessageListScrolledToBottom(true);\n        }\n    }, [updateScrollTop, closeToTop, closeToBottom, scrolledUpThreshold]);\n    return {\n        hasNewMessages,\n        isMessageListScrolledToBottom,\n        onScroll,\n        scrollToBottom,\n        wrapperRect,\n    };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}